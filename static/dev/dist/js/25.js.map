{"version":3,"sources":["webpack:///./src/pages/admin/manage/SourceEdit/CacheForm.vue?5724","webpack:///./src/pages/admin/manage/SourceEdit/CacheForm.vue?184e","webpack:///./src/pages/admin/manage/SourceEdit/CacheEdit.vue?8330","webpack:///./src/pages/admin/manage/SourceEdit/CacheEdit.vue?da99","webpack:///./src/pages/admin/manage/SourceEdit/CacheEdit.vue?b2e8","webpack:///./src/pages/admin/manage/SourceEdit/CacheForm.vue?1d7d","webpack:///./src/pages/admin/manage/SourceEdit/CacheForm.vue?f7ec","webpack:///./src/pages/admin/manage/SourceEdit/CacheEdit.vue?68ba","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./src/constants/manage.js","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./src/pages/admin/manage/SourceEdit/CacheEdit.vue?e267","webpack:///src/pages/admin/manage/SourceEdit/CacheEdit.vue","webpack:///./src/pages/admin/manage/SourceEdit/CacheForm.vue?bec3","webpack:///src/pages/admin/manage/SourceEdit/CacheForm.vue"],"names":["__webpack_require__","r","__webpack_exports__","_CacheForm_vue_vue_type_template_id_570dcbcb_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_CacheForm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheForm_vue_vue_type_style_index_0_id_570dcbcb_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheEdit_vue_vue_type_style_index_0_id_58d75051_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","index","attrs","value","on","updateCache","deleteCache","_v","list","length","click","onCreateCache","_s","i18n","addCache","_e","to","prevStep","theme","loading","pending","onSaveSetting","save","cancel","staticRenderFns","size","onDeleteCache","delete","name","directives","rawName","expression","class","error-border","errors","first","type","disabled","isEditing","domProps","blur","updateValue","input","$event","target","composing","modifiers","top","popover-width","searchable","selected","onTypeSelect","model","callback","$$v","option","id","desc","rows","detail","field","details","placeholder","$set","required","_CacheEdit_vue_vue_type_template_id_58d75051_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_CacheEdit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","module","exports","default","__esModule","anObject","get","getIterator","it","iterFn","TypeError","call","_isIterable3","_interopRequireDefault","_getIterator3","obj","arr","i","Array","isArray","_arr","_n","_d","_i","next","done","push","err","SOURCE_TYPE","gettext","keys","repo_address","repo_raw_address","branch","service_address","bucket","access_key","secret_key","path","classof","ITERATOR","Iterators","isIterable","O","hasOwnProperty","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheEdit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheEdit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","components","CacheForm","_CacheForm2","props","cacheList","Boolean","data","_tools2","deepClone","computed","watch","val","methods","splice","$emit","_this","packageValidations","$children","filter","$options","map","comp","validate","_promise2","all","then","results","every","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheForm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_CacheForm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","_manage","_index","getCacheTypeList","_value","_getCacheKeys","getCacheKeys","detailFields","_slicedToArray3","cacheValid","nameRule","max","STRING_LENGTH","SOURCE_NAME_MAX_LENGTH","regex","PACKAGE_NAME_REG","valueRule","detailValues","source","find","$validator","validateAll","result"],"mappings":"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","file":"dev/dist/js/25.js","sourcesContent":["import { render, staticRenderFns } from \"./CacheForm.vue?vue&type=template&id=570dcbcb&scoped=true&\"\nimport script from \"./CacheForm.vue?vue&type=script&lang=js&\"\nexport * from \"./CacheForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CacheForm.vue?vue&type=style&index=0&id=570dcbcb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"570dcbcb\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheForm.vue?vue&type=style&index=0&id=570dcbcb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheForm.vue?vue&type=style&index=0&id=570dcbcb&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheEdit.vue?vue&type=style&index=0&id=58d75051&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheEdit.vue?vue&type=style&index=0&id=58d75051&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cache-edit\"},[_c('div',{staticClass:\"cache-content\"},[_vm._l((_vm.list),function(item,index){return _c('cache-form',{key:index,attrs:{\"value\":item},on:{\"updateCache\":_vm.updateCache,\"deleteCache\":_vm.deleteCache}})}),_vm._v(\" \"),(_vm.list.length === 0)?_c('div',{staticClass:\"add-cache\",on:{\"click\":_vm.onCreateCache}},[_vm._v(_vm._s(_vm.i18n.addCache))]):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"operate-area\"},[_c('router-link',{staticClass:\"bk-button bk-default\",attrs:{\"to\":\"/admin/manage/source_edit/package_edit/\"}},[_vm._v(_vm._s(_vm.i18n.prevStep))]),_vm._v(\" \"),_c('bk-button',{staticClass:\"save-btn\",attrs:{\"theme\":\"success\",\"loading\":_vm.pending},on:{\"click\":_vm.onSaveSetting}},[_vm._v(\"\\n            \"+_vm._s(_vm.i18n.save)+\"\\n        \")]),_vm._v(\" \"),_c('router-link',{staticClass:\"bk-button bk-default\",attrs:{\"to\":\"/admin/manage/source_manage/\"}},[_vm._v(_vm._s(_vm.i18n.cancel))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheEdit.vue?vue&type=template&id=58d75051&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cache-form\"},[_c('bk-button',{staticClass:\"delete-btn\",attrs:{\"theme\":\"default\",\"size\":\"small\"},on:{\"click\":_vm.onDeleteCache}},[_vm._v(\"\\n        \"+_vm._s(_vm.i18n.delete)+\"\\n    \")]),_vm._v(\" \"),_c('table',{staticClass:\"form-table\"},[_c('tbody',[_c('tr',[_c('th',[_c('div',{staticClass:\"form-label required\"},[_c('label',[_vm._v(_vm._s(_vm.i18n.name))])])]),_vm._v(\" \"),_c('td',{staticClass:\"value\"},[_c('div',{staticClass:\"form-content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"},{name:\"validate\",rawName:\"v-validate\",value:(_vm.nameRule),expression:\"nameRule\"}],staticClass:\"cache-name\",class:{ 'error-border': _vm.errors.first('cacheName') },attrs:{\"type\":\"text\",\"name\":\"cacheName\",\"disabled\":_vm.isEditing},domProps:{\"value\":(_vm.name)},on:{\"blur\":_vm.updateValue,\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_vm._v(\" \"),_c('i',{directives:[{name:\"bk-tooltips\",rawName:\"v-bk-tooltips.top\",value:( _vm.errors.first('cacheName')),expression:\" errors.first('cacheName')\",modifiers:{\"top\":true}}],staticClass:\"common-icon-info common-error-tip\"})])])]),_vm._v(\" \"),_c('tr',[_c('th',[_c('div',{staticClass:\"form-label required\"},[_c('label',[_vm._v(_vm._s(_vm.i18n.type))])])]),_vm._v(\" \"),_c('td',{staticClass:\"value\"},[_c('div',{staticClass:\"form-content\"},[_c('bk-select',{staticClass:\"bk-select-inline\",attrs:{\"popover-width\":260,\"disabled\":_vm.isEditing,\"searchable\":true},on:{\"selected\":_vm.onTypeSelect},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},_vm._l((_vm.list),function(option,index){return _c('bk-option',{key:index,attrs:{\"id\":option.id,\"name\":option.name}})}),1)],1)])]),_vm._v(\" \"),_c('tr',[_c('th',[_c('div',{staticClass:\"form-label\"},[_c('label',[_vm._v(_vm._s(_vm.i18n.desc))])])]),_vm._v(\" \"),_c('td',{staticClass:\"value\"},[_c('div',{staticClass:\"form-content\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.desc),expression:\"desc\"}],staticClass:\"cache-desc\",attrs:{\"rows\":\"4\"},domProps:{\"value\":(_vm.desc)},on:{\"blur\":_vm.updateValue,\"input\":function($event){if($event.target.composing){ return; }_vm.desc=$event.target.value}}})])])]),_vm._v(\" \"),_c('tr',[_c('th',[_c('div',{staticClass:\"form-label\"},[_c('label',[_vm._v(_vm._s(_vm.i18n.detail))])])]),_vm._v(\" \"),_c('td',{staticClass:\"value\"},[_c('table',{staticClass:\"detail-table\"},[_c('tbody',_vm._l((_vm.detailFields),function(field){return _c('tr',{key:field.id},[_c('th',[_vm._v(_vm._s(field.name))]),_vm._v(\" \"),_c('td',{staticClass:\"td-with-input\",class:{ 'error-border': _vm.errors.first('detailValue' + field.id) }},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.details[field.id]),expression:\"details[field.id]\"},{name:\"validate\",rawName:\"v-validate\",value:(_vm.valueRule ),expression:\"valueRule \"}],staticClass:\"table-input\",attrs:{\"type\":\"text\",\"name\":'detailValue' + field.id,\"placeholder\":field.placeholder},domProps:{\"value\":(_vm.details[field.id])},on:{\"blur\":_vm.updateValue,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.details, field.id, $event.target.value)}}}),_vm._v(\" \"),_c('i',{directives:[{name:\"bk-tooltips\",rawName:\"v-bk-tooltips.top\",value:(_vm.i18n.required),expression:\"i18n.required\",modifiers:{\"top\":true}}],staticClass:\"common-icon-info common-error-tip\"}),_vm._v(\" \"),_c('span',{staticClass:\"common-error-tip error-msg\"},[_vm._v(\"\\n                                        \"+_vm._s(_vm.i18n.required)+\"\\n                                    \")])])])}),0)])])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheForm.vue?vue&type=template&id=570dcbcb&scoped=true&\"","import { render, staticRenderFns } from \"./CacheEdit.vue?vue&type=template&id=58d75051&scoped=true&\"\nimport script from \"./CacheEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./CacheEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CacheEdit.vue?vue&type=style&index=0&id=58d75051&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58d75051\",\n  null\n  \n)\n\nexport default component.exports","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","/**\r\n* Tencent is pleased to support the open source community by making 蓝鲸智云PaaS平台社区版 (BlueKing PaaS Community\r\n* Edition) available.\r\n* Copyright (C) 2017-2020 THL A29 Limited, a Tencent company. All rights reserved.\r\n* Licensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n* http://opensource.org/licenses/MIT\r\n* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\r\n* an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n* specific language governing permissions and limitations under the License.\r\n*/\r\n\r\n// 包源类型\r\nconst SOURCE_TYPE = [\r\n    {\r\n        type: 'git',\r\n        name: gettext('GIT'),\r\n        keys: {\r\n            repo_address: {\r\n                name: gettext('仓库链接'),\r\n                placeholder: gettext('请输入 GIT 仓库地址，如 https://github.com/bk-sops/plugins_example.git')\r\n            },\r\n            repo_raw_address: {\r\n                name: gettext('文件托管仓库链接'),\r\n                placeholder: gettext('请输入仓库中文件的 Raw 链接的前缀，如 https://raw.githubusercontent.com/bk-sops/plugins_example/')\r\n            },\r\n            branch: {\r\n                name: gettext('分支名'),\r\n                placeholder: gettext('请输入分支名')\r\n            }\r\n        }\r\n    },\r\n    {\r\n        type: 's3',\r\n        name: gettext('S3'),\r\n        keys: {\r\n            service_address: {\r\n                name: gettext('对象存储服务地址'),\r\n                placeholder: gettext('请输入')\r\n            },\r\n            bucket: {\r\n                name: gettext('Bucket'),\r\n                placeholder: gettext('请输入')\r\n            },\r\n            access_key: {\r\n                name: gettext('Access Key'),\r\n                placeholder: gettext('请输入')\r\n            },\r\n            secret_key: {\r\n                name: gettext('Secret Key'),\r\n                placeholder: gettext('请输入')\r\n            }\r\n        }\r\n    },\r\n    {\r\n        type: 'fs',\r\n        name: gettext('文件系统'),\r\n        keys: {\r\n            path: {\r\n                name: gettext('服务器文件系统路径'),\r\n                placeholder: gettext('请输入')\r\n            }\r\n        }\r\n    }\r\n]\r\n\r\nexport { SOURCE_TYPE }\r\n","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheEdit.vue?vue&type=script&lang=js&\"","/**\r\n* Tencent is pleased to support the open source community by making 蓝鲸智云PaaS平台社区版 (BlueKing PaaS Community\r\n* Edition) available.\r\n* Copyright (C) 2017-2020 THL A29 Limited, a Tencent company. All rights reserved.\r\n* Licensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n* http://opensource.org/licenses/MIT\r\n* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\r\n* an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n* specific language governing permissions and limitations under the License.\r\n*/\r\n<template>\r\n    <div class=\"cache-edit\">\r\n        <div class=\"cache-content\">\r\n            <cache-form\r\n                v-for=\"(item, index) in list\"\r\n                :key=\"index\"\r\n                :value=\"item\"\r\n                @updateCache=\"updateCache\"\r\n                @deleteCache=\"deleteCache\">\r\n            </cache-form>\r\n            <div v-if=\"list.length === 0\" class=\"add-cache\" @click=\"onCreateCache\">{{i18n.addCache}}</div>\r\n        </div>\r\n        <div class=\"operate-area\">\r\n            <router-link to=\"/admin/manage/source_edit/package_edit/\" class=\"bk-button bk-default\">{{ i18n.prevStep }}</router-link>\r\n            <bk-button\r\n                theme=\"success\"\r\n                class=\"save-btn\"\r\n                :loading=\"pending\"\r\n                @click=\"onSaveSetting\">\r\n                {{ i18n.save }}\r\n            </bk-button>\r\n            <router-link to=\"/admin/manage/source_manage/\" class=\"bk-button bk-default\">{{ i18n.cancel }}</router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import '@/utils/i18n.js'\r\n    import tools from '@/utils/tools.js'\r\n    import CacheForm from './CacheForm.vue'\r\n\r\n    export default {\r\n        name: 'CacheEdit',\r\n        components: {\r\n            CacheForm\r\n        },\r\n        props: {\r\n            cacheList: {\r\n                type: Array,\r\n                default () {\r\n                    return []\r\n                }\r\n            },\r\n            pending: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                list: tools.deepClone(this.cacheList),\r\n                i18n: {\r\n                    prevStep: gettext('上一步'),\r\n                    save: gettext('完成'),\r\n                    cancel: gettext('取消'),\r\n                    addCache: gettext('添加本地缓存')\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            isEditing () {\r\n                return this.cacheList.length > 0 && typeof this.cacheList[0].id === 'number'\r\n            }\r\n        },\r\n        watch: {\r\n            cacheList (val) {\r\n                this.list = tools.deepClone(val)\r\n            }\r\n        },\r\n        methods: {\r\n            onCreateCache () {\r\n                this.list.push({\r\n                    id: undefined,\r\n                    name: '',\r\n                    type: 's3',\r\n                    desc: '',\r\n                    details: {\r\n                        access_key: '',\r\n                        bucket: '',\r\n                        secret_key: '',\r\n                        service_address: ''\r\n                    }\r\n                })\r\n            },\r\n            updateCache (value) {\r\n                const val = tools.deepClone(value)\r\n                this.list.splice(0, 1, val)\r\n                this.$emit('updateList', 'cacheList', this.list)\r\n            },\r\n            deleteCache () {\r\n                this.list = []\r\n                this.$emit('updateList', 'cacheList', [])\r\n            },\r\n            onSaveSetting () {\r\n                const packageComps = this.$children.filter(item => item.$options.name === 'CacheForm')\r\n                const packageValidations = packageComps.map(comp => {\r\n                    return comp.validate()\r\n                })\r\n                Promise.all(packageValidations).then(results => {\r\n                    if (results.every(item => item)) {\r\n                        this.$emit('saveSetting')\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .cache-edit {\r\n        height: calc(100% - 40px);\r\n        background: #ffffff;\r\n    }\r\n    .cache-content {\r\n        min-height: 100%;\r\n        padding: 30px 60px 60px;\r\n    }\r\n    .add-cache {\r\n        margin-bottom: 60px;\r\n        height: 60px;\r\n        line-height: 60px;\r\n        color: #c4c6cc;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        border: 1px dashed #c4c6cc;\r\n        border-radius: 2px;\r\n        cursor: pointer;\r\n        &:hover {\r\n            color: #3a84ff;\r\n            border-color: #a3c5fd;\r\n        }\r\n    }\r\n    .operate-area {\r\n        margin-top: -60px;\r\n        padding: 0 60px;\r\n        height: 60px;\r\n        line-height: 60px;\r\n        border-top: 1px solid #cacedb;\r\n        .bk-button {\r\n            height: 32px;\r\n            line-height: 32px;\r\n            &:not(:last-child) {\r\n                margin-right: 6px;\r\n            }\r\n        }\r\n        .save-btn {\r\n            width: 140px;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CacheForm.vue?vue&type=script&lang=js&\"","/**\r\n* Tencent is pleased to support the open source community by making 蓝鲸智云PaaS平台社区版 (BlueKing PaaS Community\r\n* Edition) available.\r\n* Copyright (C) 2017-2020 THL A29 Limited, a Tencent company. All rights reserved.\r\n* Licensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n* http://opensource.org/licenses/MIT\r\n* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\r\n* an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n* specific language governing permissions and limitations under the License.\r\n*/\r\n<template>\r\n    <div class=\"cache-form\">\r\n        <bk-button\r\n            theme=\"default\"\r\n            size=\"small\"\r\n            class=\"delete-btn\"\r\n            @click=\"onDeleteCache\">\r\n            {{i18n.delete}}\r\n        </bk-button>\r\n        <table class=\"form-table\">\r\n            <tbody>\r\n                <tr>\r\n                    <th>\r\n                        <div class=\"form-label required\">\r\n                            <label>{{i18n.name}}</label>\r\n                        </div>\r\n                    </th>\r\n                    <td class=\"value\">\r\n                        <div class=\"form-content\">\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"cache-name\"\r\n                                name=\"cacheName\"\r\n                                :disabled=\"isEditing\"\r\n                                :class=\"{ 'error-border': errors.first('cacheName') }\"\r\n                                v-model=\"name\"\r\n                                v-validate=\"nameRule\"\r\n                                @blur=\"updateValue\">\r\n                            <i class=\"common-icon-info common-error-tip\" v-bk-tooltips.top=\" errors.first('cacheName')\"></i>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th>\r\n                        <div class=\"form-label required\">\r\n                            <label>{{i18n.type}}</label>\r\n                        </div>\r\n                    </th>\r\n                    <td class=\"value\">\r\n                        <div class=\"form-content\">\r\n                            <bk-select\r\n                                v-model=\"type\"\r\n                                class=\"bk-select-inline\"\r\n                                :popover-width=\"260\"\r\n                                :disabled=\"isEditing\"\r\n                                :searchable=\"true\"\r\n                                @selected=\"onTypeSelect\">\r\n                                <bk-option\r\n                                    v-for=\"(option, index) in list\"\r\n                                    :key=\"index\"\r\n                                    :id=\"option.id\"\r\n                                    :name=\"option.name\">\r\n                                </bk-option>\r\n                            </bk-select>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th>\r\n                        <div class=\"form-label\">\r\n                            <label>{{i18n.desc}}</label>\r\n                        </div>\r\n                    </th>\r\n                    <td class=\"value\">\r\n                        <div class=\"form-content\">\r\n                            <textarea\r\n                                rows=\"4\"\r\n                                class=\"cache-desc\"\r\n                                v-model=\"desc\"\r\n                                @blur=\"updateValue\">\r\n                            </textarea>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th>\r\n                        <div class=\"form-label\">\r\n                            <label>{{i18n.detail}}</label>\r\n                        </div>\r\n                    </th>\r\n                    <td class=\"value\">\r\n                        <table class=\"detail-table\">\r\n                            <tbody>\r\n                                <tr v-for=\"field in detailFields\" :key=\"field.id\">\r\n                                    <th>{{field.name}}</th>\r\n                                    <td class=\"td-with-input\"\r\n                                        :class=\"{ 'error-border': errors.first('detailValue' + field.id) }\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            class=\"table-input\"\r\n                                            :name=\"'detailValue' + field.id\"\r\n                                            :placeholder=\"field.placeholder\"\r\n                                            v-model=\"details[field.id]\"\r\n                                            v-validate=\"valueRule \"\r\n                                            @blur=\"updateValue\">\r\n                                        <i class=\"common-icon-info common-error-tip\" v-bk-tooltips.top=\"i18n.required\"></i>\r\n                                        <span\r\n                                            class=\"common-error-tip error-msg\">\r\n                                            {{ i18n.required }}\r\n                                        </span>\r\n                                    </td>\r\n\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n<script>\r\n    import '@/utils/i18n.js'\r\n    import { SOURCE_TYPE } from '@/constants/manage.js'\r\n    import { PACKAGE_NAME_REG, STRING_LENGTH } from '@/constants/index.js'\r\n\r\n    export default {\r\n        name: 'CacheForm',\r\n        props: {\r\n            value: {\r\n                type: Object,\r\n                default () {\r\n                    return {\r\n                        id: undefined,\r\n                        name: '',\r\n                        type: 's3',\r\n                        desc: '',\r\n                        details: {\r\n                            access_key: '',\r\n                            bucket: '',\r\n                            secret_key: '',\r\n                            service_address: ''\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        data () {\r\n            const list = this.getCacheTypeList()\r\n            const { id, name, type, desc, details } = this.value\r\n            const [detailFields] = this.getCacheKeys('s3')\r\n\r\n            return {\r\n                id,\r\n                name,\r\n                type,\r\n                desc,\r\n                details,\r\n                detailFields,\r\n                list,\r\n                cacheValid: false,\r\n                // 名称校验规则\r\n                nameRule: {\r\n                    required: true,\r\n                    max: STRING_LENGTH.SOURCE_NAME_MAX_LENGTH,\r\n                    regex: PACKAGE_NAME_REG\r\n                },\r\n                valueRule: {\r\n                    required: true\r\n                },\r\n                i18n: {\r\n                    delete: gettext('删除'),\r\n                    name: gettext('名称'),\r\n                    type: gettext('类型'),\r\n                    desc: gettext('描述'),\r\n                    detail: gettext('详细信息'),\r\n                    placeholder: gettext('请输入'),\r\n                    required: gettext('必填项')\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            isEditing () {\r\n                return typeof this.value.id === 'number'\r\n            }\r\n        },\r\n        methods: {\r\n            getCacheTypeList () {\r\n                return SOURCE_TYPE.filter(item => item.type !== 'git').map(item => {\r\n                    return {\r\n                        id: item.type,\r\n                        name: item.name\r\n                    }\r\n                })\r\n            },\r\n            getCacheKeys (type) {\r\n                const detailFields = []\r\n                const detailValues = {}\r\n\r\n                const source = SOURCE_TYPE.find(item => item.type === type)\r\n                for (const key in source.keys) {\r\n                    detailFields.push({\r\n                        id: key,\r\n                        name: source.keys[key].name,\r\n                        placeholder: source.keys[key].placeholder\r\n                    })\r\n                    detailValues[key] = ''\r\n                }\r\n\r\n                return [detailFields, detailValues]\r\n            },\r\n            validate () {\r\n                return this.$validator.validateAll().then(result => {\r\n                    return result\r\n                })\r\n            },\r\n            updateValue () {\r\n                const { id, name, type, desc, details } = this\r\n                const data = {\r\n                    id,\r\n                    name,\r\n                    type,\r\n                    desc,\r\n                    details\r\n                }\r\n                this.$emit('updateCache', data)\r\n            },\r\n            onTypeSelect (type) {\r\n                this.type = type\r\n                const keys = this.getCacheKeys(type)\r\n                this.detailFields = keys[0]\r\n                this.details = keys[1]\r\n                this.updateValue()\r\n            },\r\n            onDeleteCache () {\r\n                this.$emit('deleteCache')\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    @import '@/scss/mixins/input-error.scss';\r\n    /deep/ .bk-select {\r\n        background-color: #ffffff;\r\n        &.is-disabled {\r\n            background-color: #fafafa;\r\n        }\r\n    }\r\n    .cache-form {\r\n        position: relative;\r\n        margin-bottom: 30px;\r\n        padding: 20px;\r\n        background: #f0f1f5;\r\n        border-radius: 2px;\r\n        .form-table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            font-size: 14px;\r\n            th, td {\r\n                padding: 9px;\r\n            }\r\n            th {\r\n                position: relative;\r\n                width: 16%;\r\n                color: #313238;\r\n                font-weight: 400;\r\n            }\r\n            .form-label {\r\n                padding-right: 20%;\r\n                text-align: right;\r\n                label {\r\n                    position: relative;\r\n                }\r\n                &.required {\r\n                    label:after {\r\n                        content: '*';\r\n                        position: absolute;\r\n                        top: 1px;\r\n                        right: -10px;\r\n                        color: #F00;\r\n                        font-family: \"SimSun\";\r\n                    }\r\n                }\r\n\r\n            }\r\n            .form-content {\r\n                position: relative;\r\n                width: 40%;\r\n            }\r\n            .cache-name {\r\n                padding: 0 10px;\r\n                width: 100%;\r\n                height: 32px;\r\n                line-height: 32px;\r\n                border: 1px solid #c3cdd7;\r\n                border-radius: 2px;\r\n                color: #63656e;\r\n                outline: none;\r\n                &:hover {\r\n                    border-color: #3c96ff;\r\n                }\r\n                &:active {\r\n                    border-color: #3c96ff;\r\n                }\r\n                &[disabled=\"disabled\"] {\r\n                    color: #aaa;\r\n                    cursor: not-allowed;\r\n                    background: #fafafa;\r\n                    &:hover {\r\n                        border-color: #c3cdd7;\r\n                    }\r\n                }\r\n                @include common-input-error;\r\n            }\r\n            .cache-desc {\r\n                display: inline-block;\r\n                padding: 10px;\r\n                width: 100%;\r\n                border: 1px solid #c3cdd7;\r\n                border-radius: 2px;\r\n                color: #63656e;\r\n                outline: none;\r\n                resize: vertical;\r\n                min-height: 102px;\r\n                max-height: 140px;\r\n                &:hover {\r\n                    border-color: #3c96ff;\r\n                }\r\n                &:active {\r\n                    border-color: #3c96ff;\r\n                }\r\n            }\r\n        }\r\n        .detail-table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            background: #ffffff;\r\n            font-size: 12px;\r\n            th,td {\r\n                position: relative;\r\n                padding: 10px 20px;\r\n                border: 1px solid #dde4eb;\r\n            }\r\n            th {\r\n                width: 30%;\r\n                font-weight: 700;\r\n                text-align: center;\r\n            }\r\n            .td-with-input {\r\n                &:hover {\r\n                    border-style: double;\r\n                    border-color: #3c96ff;\r\n                }\r\n                @include common-input-error;\r\n            }\r\n        }\r\n        .table-input {\r\n            width: 100%;\r\n            color: #333333;\r\n            border: none;\r\n            outline: none;\r\n        }\r\n        .delete-btn {\r\n            position: absolute;\r\n            top: 22px;\r\n            right: 20px;\r\n            padding: 0;\r\n            background: transparent;\r\n            font-size: 12px;\r\n            border: none;\r\n            color: #3a84ff;\r\n        }\r\n    }\r\n</style>\r\n"],"sourceRoot":""}